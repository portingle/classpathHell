// ADDITIONALLY THIS DEMO USES THE OLD STYLE GRADLE DEP apply plugin

// expect failure from this build script because hamcrest-all contains hamcrest-core
// so there are lots of dupe'd resources

repositories {
    mavenLocal()
    mavenCentral()
}

buildscript {

    repositories {
        mavenLocal()
        mavenCentral()

        // include plugin repository where classpath hell lives from 1.8 onwards
        maven {
            url = "https://plugins.gradle.org/m2"
        }
    }

    dependencies {
        classpath "com.portingle:classpath-hell:1.8"
    }
}

apply plugin: 'com.portingle.classpathHell'
apply plugin: 'java'

classpathHell {

    // Demonstrate replacing the default set of exclusions
    // leaving only things like license files and manifests in violation
    resourceExclusions = [
            ".*class",
            ".*/",
    ]
}

dependencies {
    implementation group: 'org.hamcrest', name: 'hamcrest-all', version: '1.3'
    implementation group: 'org.hamcrest', name: 'hamcrest-core', version: '1.3'
}

build.dependsOn(['checkClasspath'])
